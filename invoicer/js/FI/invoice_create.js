$(function(){$("#create-invoice").modal();$("#create-invoice").on("shown.bs.modal",function(){$("#create_client_name").focus()});$("#create_created_at").inputmask(datepickerFormat);var a=new Bloodhound({datumTokenizer:function(b){return Bloodhound.tokenizers.whitespace(b.num)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:clientNameLookupRoute+"?query=%QUERY"});a.initialize();$("#create_client_name").typeahead(null,{minLength:3,source:a.ttAdapter()});$("input[name=recurring]:radio").change(function(){if($(this).val()==1){$("#div-recurring-options").show()}else{$("#div-recurring-options").hide()}});$("#invoice-create-confirm").click(function(){$.post(storeInvoiceRoute,{client_name:$("#create_client_name").val(),created_at:$("#create_created_at").val(),invoice_group_id:$("#create_invoice_group_id").val(),recurring:$("input:radio[name=recurring]:checked").val(),recurring_frequency:$("#recurring_frequency").val(),recurring_period:$("#recurring_period").val()}).done(function(b){window.location=createInvoiceReturnUrl+"/"+b.id+"/edit"}).fail(function(b){if(b.status==400){showErrors($.parseJSON(b.responseText).errors,"#modal-status-placeholder")}else{alert(unknownError)}})})});